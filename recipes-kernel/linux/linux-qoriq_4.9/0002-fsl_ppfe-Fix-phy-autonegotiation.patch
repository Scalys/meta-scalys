From f3e5144193cd6ff1a2ae8e57d4cf2d5af60da3d8 Mon Sep 17 00:00:00 2001
From: Dmitry Lavnikevich <dmitry.lavnikevich@edality.by>
Date: Fri, 27 Jul 2018 08:23:56 +0300
Subject: [PATCH] fsl_ppfe: Fix phy autonegotiation

With 0x1a1 phy negotiation doesn't complete on the 0th phy. Was tested
on the LS1012a-based grapeboard.
---
 drivers/staging/fsl_ppfe/pfe_eth.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/fsl_ppfe/pfe_eth.c b/drivers/staging/fsl_ppfe/pfe_eth.c
index f933f3afd834..652868de3742 100644
--- a/drivers/staging/fsl_ppfe/pfe_eth.c
+++ b/drivers/staging/fsl_ppfe/pfe_eth.c
@@ -1196,7 +1196,7 @@ static void ls1012a_configure_serdes(struct net_device *ndev)
 		pfe_eth_mdio_write(bus, 0, 0x0, value);
 	} else {
 		pfe_eth_mdio_write(bus, 0, 0x14, 0xb);
-		pfe_eth_mdio_write(bus, 0, 0x4, 0x1a1);
+		pfe_eth_mdio_write(bus, 0, 0x4, 0x4001);
 		pfe_eth_mdio_write(bus, 0, 0x12, 0x400);
 		pfe_eth_mdio_write(bus, 0, 0x13, 0x0);
 		pfe_eth_mdio_write(bus, 0, 0x0, 0x1140);
-- 
2.18.0

